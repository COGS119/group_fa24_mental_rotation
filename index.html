<!DOCTYPE html>
<html>

<head>
  <title>Mental Rotation Task</title>
  <script src="https://unpkg.com/jspsych@8.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-fullscreen@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-preload@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-survey-text@2.0.0"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.2.0"></script>
  <link href="https://unpkg.com/jspsych@8.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />
  <script src="https://unpkg.com/@jspsych/plugin-survey-html-form@1.0.3"></script>
  <!-- This is for data storage - please be sure to keep this script in all future updates to the code!! -->
  <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>

</head>

<body></body>
<script>

 // Initialize jsPsych + show progress bar up to
 var jsPsych = initJsPsych({
    show_progress_bar: true,
    on_finish: function () {
      jsPsych.data.displayData();
    }
  });

   //PLEASE KEEP FOR ALL FUTURE ITERATIONS
  //create a unique filename by combining a random string and a millisecond counter (to avoid duplicates)
  var random_id = jsPsych.randomization.randomID(10);
  const date = new Date();
  random_id = "p"+random_id.toString();
  var file_id = random_id + "_" + date.getTime().toString();
  const filename = `${file_id}.csv`;
  //also store the random id for convenience
  jsPsych.data.addProperties({
        random_id: random_id,
      });
  //PLEASE KEEP FOR ALL FUTURE ITERATIONS

  // Create timeline
  var timeline = [];

  // Preload images
  var preload = {
    type: jsPsychPreload,
    images: [
      'stimuli/1_0_R.jpg', 'stimuli/1_0.jpg', 'stimuli/1_50_R.jpg', 'stimuli/1_50.jpg', 'stimuli/1_100_R.jpg',
      'stimuli/1_100.jpg', 'stimuli/1_150_R.jpg', 'stimuli/1_150.jpg', 'stimuli/2_0_R.jpg', 'stimuli/2_0.jpg',
      'stimuli/2_50_R.jpg', 'stimuli/2_50.jpg', 'stimuli/2_100_R.jpg', 'stimuli/2_100.jpg', 'stimuli/2_150_R.jpg',
      'stimuli/2_150.jpg', 'stimuli/3_0_R.jpg', 'stimuli/3_0.jpg', 'stimuli/3_50_R.jpg', 'stimuli/3_50.jpg',
      'stimuli/3_100_R.jpg', 'stimuli/3_100.jpg', 'stimuli/3_150_R.jpg', 'stimuli/3_150.jpg', 'stimuli/4_0_R.jpg',
      'stimuli/4_0.jpg', 'stimuli/4_50_R.jpg', 'stimuli/4_50.jpg', 'stimuli/4_100_R.jpg', 'stimuli/4_100.jpg',
      'stimuli/4_150_R.jpg', 'stimuli/4_150.jpg', 'stimuli/5_0_R.jpg', 'stimuli/5_0.jpg', 'stimuli/5_50_R.jpg',
      'stimuli/5_50.jpg', 'stimuli/5_100_R.jpg', 'stimuli/5_100.jpg', 'stimuli/5_150_R.jpg', 'stimuli/5_150.jpg',
      'stimuli/6_0_R.jpg', 'stimuli/6_0.jpg', 'stimuli/6_50_R.jpg', 'stimuli/6_50.jpg', 'stimuli/6_100_R.jpg',
      'stimuli/6_100.jpg', 'stimuli/6_150_R.jpg', 'stimuli/6_150.jpg', 'stimuli/7_0_R.jpg', 'stimuli/7_0.jpg',
      'stimuli/7_50_R.jpg', 'stimuli/7_50.jpg', 'stimuli/7_100_R.jpg', 'stimuli/7_100.jpg', 'stimuli/7_150_R.jpg',
      'stimuli/7_150.jpg', 'stimuli/8_0_R.jpg', 'stimuli/8_0.jpg', 'stimuli/8_50_R.jpg', 'stimuli/8_50.jpg',
      'stimuli/8_100_R.jpg', 'stimuli/8_100.jpg', 'stimuli/8_150_R.jpg', 'stimuli/8_150.jpg', 'stimuli/9_0_R.jpg',
      'stimuli/9_0.jpg', 'stimuli/9_50_R.jpg', 'stimuli/9_50.jpg', 'stimuli/9_100_R.jpg', 'stimuli/9_100.jpg',
      'stimuli/9_150_R.jpg', 'stimuli/9_150.jpg', 'stimuli/10_0_R.jpg', 'stimuli/10_0.jpg', 'stimuli/10_50_R.jpg',
      'stimuli/10_50.jpg', 'stimuli/10_100_R.jpg', 'stimuli/10_100.jpg', 'stimuli/10_150_R.jpg', 'stimuli/10_150.jpg',
      'stimuli/11_0_R.jpg', 'stimuli/11_0.jpg', 'stimuli/11_50_R.jpg', 'stimuli/11_50.jpg', 'stimuli/11_100_R.jpg',
      'stimuli/11_100.jpg', 'stimuli/11_150_R.jpg', 'stimuli/11_150.jpg', 'stimuli/12_0_R.jpg', 'stimuli/12_0.jpg',
      'stimuli/12_50_R.jpg', 'stimuli/12_50.jpg', 'stimuli/12_100_R.jpg', 'stimuli/12_100.jpg', 'stimuli/12_150_R.jpg',
      'stimuli/12_150.jpg', 'stimuli/13_0_R.jpg', 'stimuli/13_0.jpg', 'stimuli/13_50_R.jpg', 'stimuli/13_50.jpg',
      'stimuli/13_100_R.jpg', 'stimuli/13_100.jpg', 'stimuli/13_150_R.jpg', 'stimuli/13_150.jpg', 'stimuli/14_0_R.jpg',
      'stimuli/14_0.jpg', 'stimuli/14_50_R.jpg', 'stimuli/14_50.jpg', 'stimuli/14_100_R.jpg', 'stimuli/14_100.jpg',
      'stimuli/14_150_R.jpg', 'stimuli/14_150.jpg', 'stimuli/15_0_R.jpg', 'stimuli/15_0.jpg', 'stimuli/15_50_R.jpg',
      'stimuli/15_50.jpg', 'stimuli/15_100_R.jpg', 'stimuli/15_100.jpg', 'stimuli/15_150_R.jpg', 'stimuli/15_150.jpg',
      'stimuli/16_0_R.jpg', 'stimuli/16_0.jpg', 'stimuli/16_50_R.jpg',
      'stimuli/16_50.jpg', 'stimuli/16_100_R.jpg', 'stimuli/16_100.jpg', 'stimuli/16_150_R.jpg', 'stimuli/16_150.jpg',
      'stimuli/17_0_R.jpg', 'stimuli/17_0.jpg', 'stimuli/17_50_R.jpg', 'stimuli/17_50.jpg', 'stimuli/17_100_R.jpg',
      'stimuli/17_100.jpg', 'stimuli/17_150_R.jpg', 'stimuli/17_150.jpg', 'stimuli/18_0_R.jpg', 'stimuli/18_0.jpg',
      'stimuli/18_50_R.jpg', 'stimuli/18_50.jpg', 'stimuli/18_100_R.jpg', 'stimuli/18_100.jpg', 'stimuli/18_150_R.jpg',
      'stimuli/18_150.jpg', 'stimuli/19_0_R.jpg', 'stimuli/19_0.jpg', 'stimuli/19_50_R.jpg', 'stimuli/19_50.jpg',
      'stimuli/19_100_R.jpg', 'stimuli/19_100.jpg', 'stimuli/19_150_R.jpg', 'stimuli/19_150.jpg', 'stimuli/20_0_R.jpg',
      'stimuli/20_0.jpg', 'stimuli/20_50_R.jpg', 'stimuli/20_50.jpg', 'stimuli/20_100_R.jpg', 'stimuli/20_100.jpg',
      'stimuli/20_150_R.jpg', 'stimuli/20_150.jpg', 'stimuli/21_0_R.jpg', 'stimuli/21_0.jpg', 'stimuli/21_50_R.jpg',
      'stimuli/21_50.jpg', 'stimuli/21_100_R.jpg', 'stimuli/21_100.jpg', 'stimuli/21_150_R.jpg', 'stimuli/21_150.jpg',
      'stimuli/22_0_R.jpg', 'stimuli/22_0.jpg', 'stimuli/22_50_R.jpg', 'stimuli/22_50.jpg', 'stimuli/22_100_R.jpg',
      'stimuli/22_100.jpg', 'stimuli/22_150_R.jpg', 'stimuli/22_150.jpg', 'stimuli/23_0_R.jpg', 'stimuli/23_0.jpg',
      'stimuli/23_50_R.jpg', 'stimuli/23_50.jpg', 'stimuli/23_100_R.jpg', 'stimuli/23_100.jpg', 'stimuli/23_150_R.jpg',
      'stimuli/23_150.jpg', 'stimuli/24_0_R.jpg', 'stimuli/24_0.jpg', 'stimuli/24_50_R.jpg', 'stimuli/24_50.jpg',
      'stimuli/24_100_R.jpg', 'stimuli/24_100.jpg', 'stimuli/24_150_R.jpg', 'stimuli/24_150.jpg', 'stimuli/25_0_R.jpg',
      'stimuli/25_0.jpg', 'stimuli/25_50_R.jpg', 'stimuli/25_50.jpg', 'stimuli/25_100_R.jpg', 'stimuli/25_100.jpg',
      'stimuli/25_150_R.jpg', 'stimuli/25_150.jpg', 'stimuli/26_0_R.jpg', 'stimuli/26_0.jpg', 'stimuli/26_50_R.jpg',
      'stimuli/26_50.jpg', 'stimuli/26_100_R.jpg', 'stimuli/26_100.jpg', 'stimuli/26_150_R.jpg', 'stimuli/26_150.jpg',
      'stimuli/27_0_R.jpg', 'stimuli/27_0.jpg', 'stimuli/27_50_R.jpg', 'stimuli/27_50.jpg', 'stimuli/27_100_R.jpg',
      'stimuli/27_100.jpg', 'stimuli/27_150_R.jpg', 'stimuli/27_150.jpg', 'stimuli/28_0_R.jpg', 'stimuli/28_0.jpg',
      'stimuli/28_50_R.jpg', 'stimuli/28_50.jpg', 'stimuli/28_100_R.jpg', 'stimuli/28_100.jpg', 'stimuli/28_150_R.jpg',
      'stimuli/28_150.jpg', 'stimuli/29_0_R.jpg', 'stimuli/29_0.jpg', 'stimuli/29_50_R.jpg', 'stimuli/29_50.jpg',
      'stimuli/29_100_R.jpg', 'stimuli/29_100.jpg', 'stimuli/29_150_R.jpg', 'stimuli/29_150.jpg', 'stimuli/30_0_R.jpg',
      'stimuli/30_0.jpg', 'stimuli/30_50_R.jpg', 'stimuli/30_50.jpg', 'stimuli/30_100_R.jpg', 'stimuli/30_100.jpg',
      'stimuli/30_150_R.jpg', 'stimuli/30_150.jpg', 'stimuli/31_0_R.jpg', 'stimuli/31_0.jpg', 'stimuli/31_50_R.jpg',
      'stimuli/31_50.jpg', 'stimuli/31_100_R.jpg', 'stimuli/31_100.jpg', 'stimuli/31_150_R.jpg', 'stimuli/31_150.jpg',
      'stimuli/32_0_R.jpg', 'stimuli/32_0.jpg', 'stimuli/32_50_R.jpg', 'stimuli/32_50.jpg', 'stimuli/32_100_R.jpg',
      'stimuli/32_100.jpg', 'stimuli/32_150_R.jpg', 'stimuli/32_150.jpg', 'stimuli/33_0_R.jpg', 'stimuli/33_0.jpg',
      'stimuli/33_50_R.jpg', 'stimuli/33_50.jpg', 'stimuli/33_100_R.jpg', 'stimuli/33_100.jpg', 'stimuli/33_150_R.jpg',
      'stimuli/33_150.jpg', 'stimuli/34_0_R.jpg', 'stimuli/34_0.jpg', 'stimuli/34_50_R.jpg', 'stimuli/34_50.jpg',
      'stimuli/34_100_R.jpg', 'stimuli/34_100.jpg', 'stimuli/34_150_R.jpg', 'stimuli/34_150.jpg', 'stimuli/35_0_R.jpg',
      'stimuli/35_0.jpg', 'stimuli/35_50_R.jpg', 'stimuli/35_50.jpg', 'stimuli/35_100_R.jpg', 'stimuli/35_100.jpg',
      'stimuli/35_150_R.jpg', 'stimuli/35_150.jpg', 'stimuli/36_0_R.jpg', 'stimuli/36_0.jpg', 'stimuli/36_50_R.jpg',
      'stimuli/36_50.jpg', 'stimuli/36_100_R.jpg', 'stimuli/36_100.jpg', 'stimuli/36_150_R.jpg', 'stimuli/36_150.jpg',
      'stimuli/37_0_R.jpg', 'stimuli/37_0.jpg', 'stimuli/37_50_R.jpg', 'stimuli/37_50.jpg', 'stimuli/37_100_R.jpg',
      'stimuli/37_100.jpg', 'stimuli/37_150_R.jpg', 'stimuli/37_150.jpg', 'stimuli/38_0_R.jpg', 'stimuli/38_0.jpg',
      'stimuli/38_50_R.jpg', 'stimuli/38_50.jpg', 'stimuli/38_100_R.jpg', 'stimuli/38_100.jpg', 'stimuli/38_150_R.jpg',
      'stimuli/38_150.jpg', 'stimuli/39_0_R.jpg', 'stimuli/39_0.jpg', 'stimuli/39_50_R.jpg', 'stimuli/39_50.jpg',
      'stimuli/39_100_R.jpg', 'stimuli/39_100.jpg', 'stimuli/39_150_R.jpg', 'stimuli/39_150.jpg', 'stimuli/40_0_R.jpg',
      'stimuli/40_0.jpg', 'stimuli/40_50_R.jpg', 'stimuli/40_50.jpg', 'stimuli/40_100_R.jpg', 'stimuli/40_100.jpg',
      'stimuli/40_150_R.jpg', 'stimuli/40_150.jpg', 'stimuli/41_0_R.jpg', 'stimuli/41_0.jpg', 'stimuli/41_50_R.jpg',
      'stimuli/41_50.jpg', 'stimuli/41_100_R.jpg', 'stimuli/41_100.jpg', 'stimuli/41_150_R.jpg', 'stimuli/41_150.jpg',
      'stimuli/42_0_R.jpg', 'stimuli/42_0.jpg', 'stimuli/42_50_R.jpg', 'stimuli/42_50.jpg', 'stimuli/42_100_R.jpg',
      'stimuli/42_100.jpg', 'stimuli/42_150_R.jpg', 'stimuli/42_150.jpg', 'stimuli/43_0_R.jpg', 'stimuli/43_0.jpg',
      'stimuli/43_50_R.jpg', 'stimuli/43_50.jpg', 'stimuli/43_100_R.jpg', 'stimuli/43_100.jpg', 'stimuli/43_150_R.jpg',
      'stimuli/43_150.jpg', 'stimuli/44_0_R.jpg', 'stimuli/44_0.jpg', 'stimuli/44_50_R.jpg', 'stimuli/44_50.jpg',
      'stimuli/44_100_R.jpg', 'stimuli/44_100.jpg', 'stimuli/44_150_R.jpg', 'stimuli/44_150.jpg', 'stimuli/45_0_R.jpg',
      'stimuli/45_0.jpg', 'stimuli/45_50_R.jpg', 'stimuli/45_50.jpg', 'stimuli/45_100_R.jpg', 'stimuli/45_100.jpg',
      'stimuli/45_150_R.jpg', 'stimuli/45_150.jpg', 'stimuli/46_0_R.jpg', 'stimuli/46_0.jpg', 'stimuli/46_50_R.jpg',
      'stimuli/46_50.jpg', 'stimuli/46_100_R.jpg', 'stimuli/46_100.jpg', 'stimuli/46_150_R.jpg', 'stimuli/46_150.jpg',
      'stimuli/47_0_R.jpg', 'stimuli/47_0.jpg', 'stimuli/47_50_R.jpg', 'stimuli/47_50.jpg', 'stimuli/47_100_R.jpg',
      'stimuli/47_100.jpg', 'stimuli/47_150_R.jpg', 'stimuli/47_150.jpg', 'stimuli/48_0_R.jpg', 'stimuli/48_0.jpg',
      'stimuli/48_50_R.jpg', 'stimuli/48_50.jpg', 'stimuli/48_100_R.jpg', 'stimuli/48_100.jpg', 'stimuli/48_150_R.jpg', 'stimuli/48_150.jpg'
    ]
  };
  timeline.push(preload);

  // Fullscreen mode
  var enter_fullscreen = {
    type: jsPsychFullscreen,
    fullscreen_mode: true
  };
  timeline.push(enter_fullscreen);

  // Welcome message
  var welcome = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "Welcome to the experiment. Press any key to begin."
  };
  timeline.push(welcome);

  // Participant ID entry
  var participant_id_entry = {
    type: jsPsychSurveyText,
    questions: [
      { prompt: "Please enter your participant ID:", name: 'participant_id' }
    ]
  };
  timeline.push(participant_id_entry);

  var overall_instructions = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
        <p>Welcome to the experiment.</p>
        <p>In this task, you will see pairs of images.</p>
        <p>Your job is to determine whether the image on the right is a rotated version of the image on the left.</p>
        <p>Press the <strong>F</strong> key if the images are the same.</p>
        <p>Press the <strong>J</strong> key if the images are different.</p>
        <p>Press any key to begin.</p>
    `
};
timeline.push(overall_instructions);

  //create an array of test images
   var test_images = [
'stimuli/1_0_R.jpg','stimuli/1_0.jpg','stimuli/1_50_R.jpg','stimuli/1_50.jpg','stimuli/1_100_R.jpg',
'stimuli/1_100.jpg','stimuli/1_150_R.jpg','stimuli/1_150.jpg','stimuli/2_0_R.jpg','stimuli/2_0.jpg',
'stimuli/2_50_R.jpg','stimuli/2_50.jpg','stimuli/2_100_R.jpg','stimuli/2_100.jpg','stimuli/2_150_R.jpg',
'stimuli/2_150.jpg','stimuli/3_0_R.jpg','stimuli/3_0.jpg','stimuli/3_50_R.jpg','stimuli/3_50.jpg',
'stimuli/3_100_R.jpg','stimuli/3_100.jpg','stimuli/3_150_R.jpg','stimuli/3_150.jpg','stimuli/4_0_R.jpg',
'stimuli/4_0.jpg','stimuli/4_50_R.jpg','stimuli/4_50.jpg','stimuli/4_100_R.jpg','stimuli/4_100.jpg',
'stimuli/4_150_R.jpg','stimuli/4_150.jpg','stimuli/5_0_R.jpg','stimuli/5_0.jpg','stimuli/5_50_R.jpg',
'stimuli/5_50.jpg','stimuli/5_100_R.jpg','stimuli/5_100.jpg','stimuli/5_150_R.jpg','stimuli/5_150.jpg',
'stimuli/6_0_R.jpg','stimuli/6_0.jpg','stimuli/6_50_R.jpg','stimuli/6_50.jpg','stimuli/6_100_R.jpg',
'stimuli/6_100.jpg','stimuli/6_150_R.jpg','stimuli/6_150.jpg','stimuli/7_0_R.jpg','stimuli/7_0.jpg',
'stimuli/7_50_R.jpg','stimuli/7_50.jpg','stimuli/7_100_R.jpg','stimuli/7_100.jpg','stimuli/7_150_R.jpg',
'stimuli/7_150.jpg','stimuli/8_0_R.jpg','stimuli/8_0.jpg','stimuli/8_50_R.jpg','stimuli/8_50.jpg',
'stimuli/8_100_R.jpg','stimuli/8_100.jpg','stimuli/8_150_R.jpg','stimuli/8_150.jpg','stimuli/9_0_R.jpg',
'stimuli/9_0.jpg','stimuli/9_50_R.jpg','stimuli/9_50.jpg','stimuli/9_100_R.jpg','stimuli/9_100.jpg',
'stimuli/9_150_R.jpg','stimuli/9_150.jpg','stimuli/10_0_R.jpg','stimuli/10_0.jpg','stimuli/10_50_R.jpg',
'stimuli/10_50.jpg','stimuli/10_100_R.jpg','stimuli/10_100.jpg','stimuli/10_150_R.jpg','stimuli/10_150.jpg',
'stimuli/11_0_R.jpg','stimuli/11_0.jpg','stimuli/11_50_R.jpg','stimuli/11_50.jpg','stimuli/11_100_R.jpg',
'stimuli/11_100.jpg','stimuli/11_150_R.jpg','stimuli/11_150.jpg','stimuli/12_0_R.jpg','stimuli/12_0.jpg',
'stimuli/12_50_R.jpg','stimuli/12_50.jpg','stimuli/12_100_R.jpg','stimuli/12_100.jpg','stimuli/12_150_R.jpg',
'stimuli/12_150.jpg','stimuli/13_0_R.jpg','stimuli/13_0.jpg','stimuli/13_50_R.jpg','stimuli/13_50.jpg',
'stimuli/13_100_R.jpg','stimuli/13_100.jpg','stimuli/13_150_R.jpg','stimuli/13_150.jpg','stimuli/14_0_R.jpg',
'stimuli/14_0.jpg','stimuli/14_50_R.jpg','stimuli/14_50.jpg','stimuli/14_100_R.jpg','stimuli/14_100.jpg',
'stimuli/14_150_R.jpg','stimuli/14_150.jpg','stimuli/15_0_R.jpg','stimuli/15_0.jpg','stimuli/15_50_R.jpg',
'stimuli/15_50.jpg','stimuli/15_100_R.jpg','stimuli/15_100.jpg','stimuli/15_150_R.jpg','stimuli/15_150.jpg',
'stimuli/16_0_R.jpg','stimuli/16_0.jpg','stimuli/16_50_R.jpg',
'stimuli/16_50.jpg', 'stimuli/16_100_R.jpg', 'stimuli/16_100.jpg', 'stimuli/16_150_R.jpg', 'stimuli/16_150.jpg', 
'stimuli/17_0_R.jpg', 'stimuli/17_0.jpg', 'stimuli/17_50_R.jpg', 'stimuli/17_50.jpg', 'stimuli/17_100_R.jpg', 
'stimuli/17_100.jpg', 'stimuli/17_150_R.jpg', 'stimuli/17_150.jpg', 'stimuli/18_0_R.jpg', 'stimuli/18_0.jpg', 
'stimuli/18_50_R.jpg', 'stimuli/18_50.jpg', 'stimuli/18_100_R.jpg', 'stimuli/18_100.jpg', 'stimuli/18_150_R.jpg', 
'stimuli/18_150.jpg', 'stimuli/19_0_R.jpg', 'stimuli/19_0.jpg', 'stimuli/19_50_R.jpg', 'stimuli/19_50.jpg', 
'stimuli/19_100_R.jpg', 'stimuli/19_100.jpg', 'stimuli/19_150_R.jpg', 'stimuli/19_150.jpg', 'stimuli/20_0_R.jpg', 
'stimuli/20_0.jpg', 'stimuli/20_50_R.jpg', 'stimuli/20_50.jpg', 'stimuli/20_100_R.jpg', 'stimuli/20_100.jpg', 
'stimuli/20_150_R.jpg', 'stimuli/20_150.jpg', 'stimuli/21_0_R.jpg', 'stimuli/21_0.jpg', 'stimuli/21_50_R.jpg', 
'stimuli/21_50.jpg', 'stimuli/21_100_R.jpg', 'stimuli/21_100.jpg', 'stimuli/21_150_R.jpg', 'stimuli/21_150.jpg', 
'stimuli/22_0_R.jpg', 'stimuli/22_0.jpg', 'stimuli/22_50_R.jpg', 'stimuli/22_50.jpg', 'stimuli/22_100_R.jpg', 
'stimuli/22_100.jpg', 'stimuli/22_150_R.jpg', 'stimuli/22_150.jpg', 'stimuli/23_0_R.jpg', 'stimuli/23_0.jpg', 
'stimuli/23_50_R.jpg', 'stimuli/23_50.jpg', 'stimuli/23_100_R.jpg', 'stimuli/23_100.jpg', 'stimuli/23_150_R.jpg', 
'stimuli/23_150.jpg', 'stimuli/24_0_R.jpg', 'stimuli/24_0.jpg', 'stimuli/24_50_R.jpg', 'stimuli/24_50.jpg', 
'stimuli/24_100_R.jpg', 'stimuli/24_100.jpg', 'stimuli/24_150_R.jpg', 'stimuli/24_150.jpg', 'stimuli/25_0_R.jpg', 
'stimuli/25_0.jpg', 'stimuli/25_50_R.jpg', 'stimuli/25_50.jpg', 'stimuli/25_100_R.jpg', 'stimuli/25_100.jpg', 
'stimuli/25_150_R.jpg', 'stimuli/25_150.jpg', 'stimuli/26_0_R.jpg', 'stimuli/26_0.jpg', 'stimuli/26_50_R.jpg', 
'stimuli/26_50.jpg', 'stimuli/26_100_R.jpg', 'stimuli/26_100.jpg', 'stimuli/26_150_R.jpg', 'stimuli/26_150.jpg', 
'stimuli/27_0_R.jpg', 'stimuli/27_0.jpg', 'stimuli/27_50_R.jpg', 'stimuli/27_50.jpg', 'stimuli/27_100_R.jpg', 
'stimuli/27_100.jpg', 'stimuli/27_150_R.jpg', 'stimuli/27_150.jpg', 'stimuli/28_0_R.jpg', 'stimuli/28_0.jpg', 
'stimuli/28_50_R.jpg', 'stimuli/28_50.jpg', 'stimuli/28_100_R.jpg', 'stimuli/28_100.jpg', 'stimuli/28_150_R.jpg', 
'stimuli/28_150.jpg', 'stimuli/29_0_R.jpg', 'stimuli/29_0.jpg', 'stimuli/29_50_R.jpg', 'stimuli/29_50.jpg', 
'stimuli/29_100_R.jpg', 'stimuli/29_100.jpg', 'stimuli/29_150_R.jpg', 'stimuli/29_150.jpg', 'stimuli/30_0_R.jpg', 
'stimuli/30_0.jpg', 'stimuli/30_50_R.jpg', 'stimuli/30_50.jpg', 'stimuli/30_100_R.jpg', 'stimuli/30_100.jpg', 
'stimuli/30_150_R.jpg', 'stimuli/30_150.jpg', 'stimuli/31_0_R.jpg', 'stimuli/31_0.jpg', 'stimuli/31_50_R.jpg', 
'stimuli/31_50.jpg', 'stimuli/31_100_R.jpg', 'stimuli/31_100.jpg', 'stimuli/31_150_R.jpg', 'stimuli/31_150.jpg', 
'stimuli/32_0_R.jpg', 'stimuli/32_0.jpg', 'stimuli/32_50_R.jpg', 'stimuli/32_50.jpg', 'stimuli/32_100_R.jpg', 
'stimuli/32_100.jpg', 'stimuli/32_150_R.jpg', 'stimuli/32_150.jpg', 'stimuli/33_0_R.jpg', 'stimuli/33_0.jpg', 
'stimuli/33_50_R.jpg', 'stimuli/33_50.jpg', 'stimuli/33_100_R.jpg', 'stimuli/33_100.jpg', 'stimuli/33_150_R.jpg', 
'stimuli/33_150.jpg', 'stimuli/34_0_R.jpg', 'stimuli/34_0.jpg', 'stimuli/34_50_R.jpg', 'stimuli/34_50.jpg', 
'stimuli/34_100_R.jpg', 'stimuli/34_100.jpg', 'stimuli/34_150_R.jpg', 'stimuli/34_150.jpg', 'stimuli/35_0_R.jpg', 
'stimuli/35_0.jpg', 'stimuli/35_50_R.jpg', 'stimuli/35_50.jpg', 'stimuli/35_100_R.jpg', 'stimuli/35_100.jpg', 
'stimuli/35_150_R.jpg', 'stimuli/35_150.jpg', 'stimuli/36_0_R.jpg', 'stimuli/36_0.jpg', 'stimuli/36_50_R.jpg', 
'stimuli/36_50.jpg', 'stimuli/36_100_R.jpg', 'stimuli/36_100.jpg', 'stimuli/36_150_R.jpg', 'stimuli/36_150.jpg', 
'stimuli/37_0_R.jpg', 'stimuli/37_0.jpg', 'stimuli/37_50_R.jpg', 'stimuli/37_50.jpg', 'stimuli/37_100_R.jpg', 
'stimuli/37_100.jpg', 'stimuli/37_150_R.jpg', 'stimuli/37_150.jpg', 'stimuli/38_0_R.jpg', 'stimuli/38_0.jpg', 
'stimuli/38_50_R.jpg', 'stimuli/38_50.jpg', 'stimuli/38_100_R.jpg', 'stimuli/38_100.jpg', 'stimuli/38_150_R.jpg', 
'stimuli/38_150.jpg', 'stimuli/39_0_R.jpg', 'stimuli/39_0.jpg', 'stimuli/39_50_R.jpg', 'stimuli/39_50.jpg', 
'stimuli/39_100_R.jpg', 'stimuli/39_100.jpg', 'stimuli/39_150_R.jpg', 'stimuli/39_150.jpg', 'stimuli/40_0_R.jpg', 
'stimuli/40_0.jpg', 'stimuli/40_50_R.jpg', 'stimuli/40_50.jpg', 'stimuli/40_100_R.jpg', 'stimuli/40_100.jpg', 
'stimuli/40_150_R.jpg', 'stimuli/40_150.jpg', 'stimuli/41_0_R.jpg', 'stimuli/41_0.jpg', 'stimuli/41_50_R.jpg', 
'stimuli/41_50.jpg', 'stimuli/41_100_R.jpg', 'stimuli/41_100.jpg', 'stimuli/41_150_R.jpg', 'stimuli/41_150.jpg', 
'stimuli/42_0_R.jpg', 'stimuli/42_0.jpg', 'stimuli/42_50_R.jpg', 'stimuli/42_50.jpg', 'stimuli/42_100_R.jpg',
'stimuli/42_100.jpg', 'stimuli/42_150_R.jpg', 'stimuli/42_150.jpg', 'stimuli/43_0_R.jpg', 'stimuli/43_0.jpg', 
'stimuli/43_50_R.jpg', 'stimuli/43_50.jpg', 'stimuli/43_100_R.jpg','stimuli/43_100.jpg', 'stimuli/43_150_R.jpg', 
'stimuli/43_150.jpg', 'stimuli/44_0_R.jpg', 'stimuli/44_0.jpg', 'stimuli/44_50_R.jpg', 'stimuli/44_50.jpg', 
'stimuli/44_100_R.jpg','stimuli/44_100.jpg', 'stimuli/44_150_R.jpg', 'stimuli/44_150.jpg', 'stimuli/45_0_R.jpg', 
'stimuli/45_0.jpg', 'stimuli/45_50_R.jpg', 'stimuli/45_50.jpg', 'stimuli/45_100_R.jpg','stimuli/45_100.jpg', 
'stimuli/45_150_R.jpg', 'stimuli/45_150.jpg', 'stimuli/46_0_R.jpg', 'stimuli/46_0.jpg', 'stimuli/46_50_R.jpg', 
'stimuli/46_50.jpg', 'stimuli/46_100_R.jpg','stimuli/46_100.jpg', 'stimuli/46_150_R.jpg', 'stimuli/46_150.jpg', 
'stimuli/47_0_R.jpg', 'stimuli/47_0.jpg', 'stimuli/47_50_R.jpg', 'stimuli/47_50.jpg', 'stimuli/47_100_R.jpg',
'stimuli/47_100.jpg', 'stimuli/47_150_R.jpg', 'stimuli/47_150.jpg', 'stimuli/48_0_R.jpg', 'stimuli/48_0.jpg', 
'stimuli/48_50_R.jpg', 'stimuli/48_50.jpg', 'stimuli/48_100_R.jpg','stimuli/48_100.jpg', 'stimuli/48_150_R.jpg', 'stimuli/48_150.jpg'
   ];


// code below ensures that for every participant, they see a different array of images 
  // randomly select 24 images that are rotated 0 degrees & half of them contain incorrect rotation 
  let zeroDegree = jsPsych.randomization.sampleWithoutReplacement(
  test_images.filter(img => img.includes("_0.") && !img.includes("_R")), 12
).concat(
  jsPsych.randomization.sampleWithoutReplacement(
    test_images.filter(img => img.includes("_0_R")), 12
  )
);
  // randomly select 24 images that are rotated 50 degrres & half of them contain incorrect rotation 
  let fiftyDegree = jsPsych.randomization.sampleWithoutReplacement(
  test_images.filter(img => img.includes("_50.") && !img.includes("_R")), 12
).concat(
  jsPsych.randomization.sampleWithoutReplacement(
    test_images.filter(img => img.includes("_50_R")), 12
  )
);

  // randomly select 24 images that are rotated 100 degrees & half of them contain incorrect rotation 
  let oneHundredDegree = jsPsych.randomization.sampleWithoutReplacement(
  test_images.filter(img => img.includes("_100.") && !img.includes("_R")), 12
).concat(
  jsPsych.randomization.sampleWithoutReplacement(
    test_images.filter(img => img.includes("_100_R")), 12
  )
);

  // randomly select 24 images that are rotated 150 degrees & half of them contain incorrect rotation 
  let oneHundredFiftyDegree = jsPsych.randomization.sampleWithoutReplacement(
  test_images.filter(img => img.includes("_150.") && !img.includes("_R")), 12
).concat(
  jsPsych.randomization.sampleWithoutReplacement(
    test_images.filter(img => img.includes("_150_R")), 12
  )
);

  // add all images into array to be randomly tested 
  var shuffled_test_images = jsPsych.randomization.shuffle(
    zeroDegree.concat(fiftyDegree, oneHundredDegree, oneHundredFiftyDegree));

// Print the selected images to the console
console.log("Selected images for testing:", shuffled_test_images);
console.log("Selected zero-degree images:", zeroDegree);
console.log("Selected fifty-degree images:", fiftyDegree);
console.log("Selected one-hundred-degree images:", oneHundredDegree);
console.log("Selected one-hundred-fifty-degree images:", oneHundredFiftyDegree);


  // Initialize an empty array for trials
  var trials = [];

// setting up counter to split length of exp based on image count 
var halfwayPoint = Math.floor(shuffled_test_images.length / 2)
var counter = 0 

for (let i = 0; i < shuffled_test_images.length; i++) {
  // determining correct response for each image based on "R" or not 
  let correct_response = shuffled_test_images[i].includes("_R") ? 'j' : 'f';
  
  //line below only relevant if we have a trial counter to display
  //let remainingTrials = shuffled_test_images.length - i;
  
  // mental rotation trial
  var mental_rotation_trial = {
    type: jsPsychImageKeyboardResponse,
    stimulus: shuffled_test_images[i],
    choices: ['f', 'j'],
    prompt: "<p>Press 'f' if the images are the same, 'j' if they are different.</p>",
    
    //line below only relevant if we have a trial counter to display
    ///let remainingTrials = shuffled_test_images.length - i;

    // mental rotation trial
    var mental_rotation_trial = {
      type: jsPsychImageKeyboardResponse,
      stimulus: shuffled_test_images[i],
      choices: ['f', 'j'],
      prompt: "<p>Press 'f' if the images are the same, 'j' if they are different.</p>",

      //line below only relevant if we have a trial counter to display
      //+ "<p>Remaining images: " + remainingTrials + "</p>",

  // fixation cross between each trial
  var fixation = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: '<div style="font-size: 75px;">+</div>',
    choices: "NO_KEYS",
    trial_duration: 1000
  };

  trials.push(fixation, mental_rotation_trial, feedback);  

  // checking halfway status 
  if(++counter === halfwayPoint) {
    var break_trial = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "<p> Take a break! Experiment continues in 30 seconds . </p>",
      trial_duration: 30000,
      choices: ['space']
    };

    // color coded borders around response 
    var feedback = {
      type: jsPsychHtmlKeyboardResponse,
      trial_duration: 500,
      stimulus: function () {
        var last_trial_correct = jsPsych.data.get().last(1).values()[0].correct;
        return last_trial_correct
          ? '<p style="border: 5px solid green;">Correct!</p>'
          : '<p style="border: 5px solid red;">Incorrect.</p>';
      }
    };

    trials.push(mental_rotation_trial, feedback);

    // checking halfway status 
    if (++counter === halfwayPoint) {
      var break_trial = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: "<p> Take a break! Exp continues in 1 minute . </p>",
        trial_duration: 60000,
        choices: ['space']
      };
      trials.push(break_trial)
    }
  }
}


  // run exp
timeline.push(...trials);

// demographics message
var demographic_message = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: "<p>Thank you for participating!</p><p>Please press space to answer our survey.</p>",
  choices: [' '] 
};
timeline.push(demographic_message);


  // Adding VVIQ survey for data collection 
  var VVIQ = {
  type: jsPsychSurveyHtmlForm,
  preamble: '<b>Vividness of Visual Imagery Questionnaire (VVIQ) (16 questions) </b>',
  html: `
    <div style="width: 600px; margin: 0 auto;">
    <p><b>Think of some relative or friend whom you frequently see (but who is not with you at present) and consider carefully the picture that comes before your mind’s eye.</b></p>
    <label>The exact contours of face, head, shoulders, and body: 
      <select name="response_1" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>Characteristic poses of head, attitudes of body, etc.
      <select name="response_2" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>The precise carriage, length of step, etc. in walking.
      <select name="response_3" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>The different colors worn in some familiar clothes.
      <select name="response_4" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>

  
    <p><b>Visualize a rising sun. Consider carefully the picture that comes before your mind’s eye.</b></p>
    <label>The sun is rising above the horizon into a hazy sky.
      <select name="response_5" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>The sky clears and surrounds the sun with blueness.
      <select name="response_6" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>Clouds. A storm blows up, with flashes of lightening.
      <select name="response_7" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>A rainbow appears.
      <select name="response_8" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>


  <p><b>Think of the front of a shop which you often go to. Consider the picture that comes before your mind’s eye.</b></p>
      <label>The overall appearance of the shop from the opposite side of the road.
        <select name="response_9" required>
          <option value="" disabled selected>Select your option</option>
          <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
          <option value="Dim and vague; flat">Dim and vague; flat</option>
          <option value="Moderately clear and lively">Moderately clear and lively</option>
          <option value="Clear and lively">Clear and lively</option>
          <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
        </select>
      </label>
      <br><br>
    <label>A window display including colors, shape, and details of individual items for sale.
      <select name="response_10" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>You are near the entrance. The color, shape, and details of the door.
      <select name="response_11" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>You enter the shop and go to the counter. The counter assistant serves you. Money changes hands.
      <select name="response_12" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>


  <p><b>Finally, think of a country scene which involves trees, mountains, and a lake. Consider the picture that comes before your mind’s eye.</b></p>
      <label>The contours of the landscape.
        <select name="response_13" required>
          <option value="" disabled selected>Select your option</option>
          <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
          <option value="Dim and vague; flat">Dim and vague; flat</option>
          <option value="Moderately clear and lively">Moderately clear and lively</option>
          <option value="Clear and lively">Clear and lively</option>
          <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
        </select>
      </label>
      <br><br>
    <label>The color and shape of the trees.
      <select name="response_14" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>The color and shape of the lake.
      <select name="response_15" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>
    <label>A strong wind blows on the tree and on the lake causing waves.
      <select name="response_16" required>
        <option value="" disabled selected>Select your option</option>
        <option value="No image at all, you only “know” that you are thinking of the object">No image at all, you only “know”</option>
        <option value="Dim and vague; flat">Dim and vague; flat</option>
        <option value="Moderately clear and lively">Moderately clear and lively</option>
        <option value="Clear and lively">Clear and lively</option>
        <option value="Perfectly clear and lively as real seeing">Perfectly clear and lively as real seeing</option>
      </select>
    </label>
    <br><br>   

  
  </div>
  `
};
// push VVIQ to timeline
  timeline.push(VVIQ);

  var demographicSurvey = {
    type: jsPsychSurveyHtmlForm,
    preamble: '<p>Please complete this demographic questionnaire:</p>',
    html: `
        <div style="width: 600px; margin: 0 auto;">
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" min="18" max="100" required>
            </div>
            <div class="form-group">
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required>
                    <option value="">Select...</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="non-binary">Non-binary</option>
                    <option value="other">Other</option>
                    <option value="prefer-not">Prefer not to say</option>
                </select>
            </div>
            <div class="form-group">
                <label for="education">Highest Level of Education:</label>
                <select id="education" name="education" required>
                    <option value="">Select...</option>
                    <option value="high-school">High School</option>
                    <option value="some-college">Some College</option>
                    <option value="bachelors">Bachelor's Degree</option>
                    <option value="masters">Master's Degree</option>
                    <option value="doctorate">Doctorate</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="handedness">Handedness:</label>
                <select id="handedness" name="handedness" required>
                    <option value="">Select...</option>
                    <option value="right">Right-handed</option>
                    <option value="left">Left-handed</option>
                    <option value="ambidextrous">Ambidextrous</option>
                </select>
            </div>
            <div class="form-group">
                <label for="vision">Vision:</label>
                <select id="vision" name="vision" required>
                    <option value="">Select...</option>
                    <option value="normal">Normal</option>
                    <option value="corrected">Corrected to normal</option>
                    <option value="impaired">Visually impaired</option>
                </select>
            </div>
        </div>
        <div class="form-group">
                <label for="technical_difficulties">Did you experience any technical difficulties during the experiment? If yes, please describe:</label>
                <textarea id="technical_difficulties" name="technical_difficulties" rows="4" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
            </div>
        <div class="form-group">
                <label for="knowledge_check">What do you think the experiment was testing?</label>
                <textarea id="knowledge_check" name="knowledge_check" rows="4" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
            </div>
        </div>
    `,
    button_label: 'Continue',
    css_classes: ['survey-form'],
    on_load: function() {
        // Add custom CSS for form styling
        document.head.insertAdjacentHTML('beforeend', `
            <style>
                .survey-form .form-group {
                    margin: 20px 0;
                }
                .survey-form label {
                    display: block;
                    margin-bottom: 5px;
                    font-weight: bold;
                }
                .survey-form input,
                .survey-form select {
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                }
            </style>
        `);
    }
};

// Add the survey to the timeline instead of the Google Form link
timeline.push(demographicSurvey);  


//PLEASE KEEP FOR ALL FUTURE ITERATIONS
  //this portion of the code ensures that the data gets sent to be stored on OSF
  const save_data = {
    type: jsPsychPipe,
    action: "save",
    experiment_id: "gMpfSRsXGlob",
    filename: filename,
    data_string: () => jsPsych.data.get().csv()
  };
  timeline.push(save_data);
  //PLEASE KEEP FOR ALL FUTURE ITERATIONS


// debrief msg 
var debriefing = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: `
        <p>Thank you for participating in this experiment!</p>
        <p>This study was designed to investigate your ability to mentally rotate objects. By examining your responses, we aim to understand how visual-spatial information is processed and maintained!</p>
        <p>If you have any questions or concerns about this study, please feel free to contact the Mental Rotation research team.</p>
        <p>Press any key to finish the experiment.</p>
    `
  };

  timeline.push(debriefing);


  // Final message
  var final_message = {
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<p>Thank you for participating in our experiment! We aimed to test how your reaction time changed as you compared objects at different angles. </p><p>Press any key to continue.</p>"
  };
  timeline.push(final_message);

  // Exit fullscreen mode
  var exit_fullscreen = {
    type: jsPsychFullscreen,
    fullscreen_mode: false,
    delay_after: 0
  };
  timeline.push(exit_fullscreen);

  jsPsych.run(timeline);

</script>
</html>
